<!-- Navbar -->
<div th:fragment="navbar">
  <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
    <div class="container">
      <a th:href="@{/}" class="navbar-brand d-flex align-items-center">
        <img
          th:src="@{/img/alcancia.png}"
          width="80"
          height="auto"
          alt="Logo Despensa La Alcancía"
        />
      </a>
      <button
        class="navbar-toggler border-0"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <!-- Ofertas -->
          <li
            class="nav-item dropdown"
            th:if="${session.usuariosession != null}"
          >
            <a
              class="nav-link dropdown-toggle"
              href="#"
              role="button"
              data-bs-toggle="dropdown"
            >
              <i class="bi bi-tag-fill me-1"></i> Ofertas
            </a>
            <ul class="dropdown-menu">
              <li sec:authorize="hasRole('ADMIN')">
                <a class="dropdown-item" th:href="@{/oferta/registrar}">
                  <i class="bi bi-plus-circle me-2"></i>Crear Oferta
                </a>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a class="dropdown-item" th:href="@{/oferta/lista}">
                  <i class="bi bi-list-ul me-2"></i>Listar Ofertas
                </a>
              </li>
            </ul>
          </li>

          <!-- Productos -->
          <li
            class="nav-item dropdown"
            th:if="${session.usuariosession != null}"
          >
            <a
              class="nav-link dropdown-toggle"
              href="#"
              role="button"
              data-bs-toggle="dropdown"
            >
              <i class="bi bi-box-seam me-1"></i> Productos
            </a>
            <ul class="dropdown-menu">
              <li sec:authorize="hasRole('ADMIN')">
                <a class="dropdown-item" th:href="@{/producto/registrar}">
                  <i class="bi bi-plus-circle me-2"></i>Crear Producto
                </a>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a class="dropdown-item" th:href="@{/producto/lista}">
                  <i class="bi bi-list-ul me-2"></i>Listar Productos
                </a>
              </li>
            </ul>
          </li>

          <!-- Proveedores -->
          <li
            class="nav-item dropdown"
            th:if="${session.usuariosession != null}"
            sec:authorize="hasRole('ADMIN')"
          >
            <a
              class="nav-link dropdown-toggle"
              href="#"
              role="button"
              data-bs-toggle="dropdown"
            >
              <i class="bi bi-truck me-1"></i> Proveedores
            </a>
            <ul class="dropdown-menu">
              <li>
                <a class="dropdown-item" th:href="@{/proveedor/registrar}">
                  <i class="bi bi-plus-circle me-2"></i>Crear Proveedor
                </a>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a class="dropdown-item" th:href="@{/proveedor/lista}">
                  <i class="bi bi-list-ul me-2"></i>Listar Proveedores
                </a>
              </li>
            </ul>
          </li>

          <!-- Rubros -->
          <li
            class="nav-item dropdown"
            th:if="${session.usuariosession != null}"
            sec:authorize="hasRole('ADMIN')"
          >
            <a
              class="nav-link dropdown-toggle"
              href="#"
              role="button"
              data-bs-toggle="dropdown"
            >
              <i class="bi bi-grid-3x3-gap me-1"></i> Rubros
            </a>
            <ul class="dropdown-menu">
              <li>
                <a class="dropdown-item" th:href="@{/rubro/registrar}">
                  <i class="bi bi-plus-circle me-2"></i>Crear Rubro
                </a>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a class="dropdown-item" th:href="@{/rubro/lista}">
                  <i class="bi bi-list-ul me-2"></i>Listar Rubros
                </a>
              </li>
            </ul>
          </li>

          <!-- Clientes -->
          <li
            class="nav-item dropdown"
            th:if="${session.usuariosession != null}"
            sec:authorize="hasRole('ADMIN')"
          >
            <a
              class="nav-link dropdown-toggle"
              href="#"
              role="button"
              data-bs-toggle="dropdown"
            >
              <i class="bi bi-people me-1"></i> Clientes
            </a>
            <ul class="dropdown-menu">
              <li>
                <a class="dropdown-item" th:href="@{/registrar}">
                  <i class="bi bi-person-plus me-2"></i>Registrar Cliente
                </a>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a class="dropdown-item" th:href="@{/listarUsuarios}">
                  <i class="bi bi-list-ul me-2"></i>Listar Clientes
                </a>
              </li>
            </ul>
          </li>

          <!-- Perfil -->
          <li
            class="nav-item dropdown"
            th:if="${session.usuariosession != null}"
          >
            <a
              class="nav-link dropdown-toggle"
              href="#"
              role="button"
              data-bs-toggle="dropdown"
            >
              <i class="bi bi-person-circle me-1"></i> Perfil
            </a>
            <ul class="dropdown-menu">
              <li>
                <a class="dropdown-item" th:href="@{/perfil}">
                  <i class="bi bi-pencil-square me-2"></i>Editar Perfil
                </a>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li>
                <a class="dropdown-item" th:href="@{/logout}">
                  <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión
                </a>
              </li>
            </ul>
          </li>

          <!-- Auth Links -->
          <li class="nav-item" th:if="${session.usuariosession == null}">
            <a class="nav-link" href="/registrar">
              <i class="bi bi-person-plus-fill me-1"></i> Registrate
            </a>
          </li>
          <li class="nav-item" th:if="${session.usuariosession == null}">
            <a class="nav-link" href="/login">
              <i class="bi bi-box-arrow-in-right me-1"></i> Login
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</div>
